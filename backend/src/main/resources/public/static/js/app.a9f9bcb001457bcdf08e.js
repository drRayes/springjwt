webpackJsonp([3],{"7Kme":function(t,e){},HAkb:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("nav",{staticClass:"navbar navbar-expand navbar-dark bg-dark"},[s("a",{staticClass:"navbar-brand",attrs:{href:""},on:{click:function(t){t.preventDefault()}}},[t._v("Equipment")]),t._v(" "),s("div",{staticClass:"navbar-nav mr-auto"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/home"}},[s("font-awesome-icon",{attrs:{icon:"home"}}),t._v("Home\n        ")],1)],1),t._v(" "),t.showAdminBoard?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/admin"}},[t._v("Admin Board")])],1):t._e(),t._v(" "),t.showModeratorBoard?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/mod"}},[t._v("Moderator Board")])],1):t._e(),t._v(" "),s("li",{staticClass:"nav-item"},[t.currentUser?s("router-link",{staticClass:"nav-link",attrs:{to:"/user"}},[t._v("User")]):t._e()],1)]),t._v(" "),t.currentUser?t._e():s("div",{staticClass:"navbar-nav ml-auto"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/register"}},[s("font-awesome-icon",{attrs:{icon:"user-plus"}}),t._v("Sign Up\n        ")],1)],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[s("font-awesome-icon",{attrs:{icon:"sign-in-alt"}}),t._v("Login\n        ")],1)],1)]),t._v(" "),t.currentUser?s("div",{staticClass:"navbar-nav ml-auto"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/profile"}},[s("font-awesome-icon"),t._v("\n          "+t._s(t.currentUser.username)+"\n        ")],1)],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.logOut(e)}}},[s("font-awesome-icon",{attrs:{icon:"sign-out-alt"}}),t._v("LogOut\n        ")],1)])]):t._e()]),t._v(" "),s("div",{staticClass:"container"},[s("router-view")],1)])},staticRenderFns:[]},n=s("VU/8")({computed:{currentUser:function(){return this.$store.state.auth.user},showAdminBoard:function(){return!(!this.currentUser||!this.currentUser.roles)&&this.currentUser.roles.includes("ROLE_ADMIN")},showModeratorBoard:function(){return!(!this.currentUser||!this.currentUser.roles)&&this.currentUser.roles.includes("ROLE_MODERATOR")}},methods:{logOut:function(){this.$store.dispatch("auth/logout"),this.$router.push("/login")}}},r,!1,null,null,null).exports,i=s("/ocq"),o=(s("qjiu"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("header",{staticClass:"jumbotron"},[e("h3",[this._v(this._s(this.content))])])])},staticRenderFns:[]}),u=s("VU/8")({name:"Home",data:function(){return{content:""}},mounted:function(){}},o,!1,null,null,null).exports,l=s("Zrlr"),c=s.n(l),m=function t(e,s,a){c()(this,t),this.username=e,this.email=s,this.password=a},d={name:"Login",data:function(){return{user:new m("",""),loading:!1,message:""}},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}},created:function(){this.loggedIn&&this.$router.push("/profile")},methods:{handleLogin:function(){var t=this;this.loading=!0,this.$validator.validateAll().then(function(e){e?t.user.username&&t.user.password&&t.$store.dispatch("auth/login",t.user).then(function(){t.$router.push("/profile")},function(e){t.loading=!1,t.message=e.response&&e.response.data||e.message||e.toString()}):t.loading=!1})}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card card-container"},[s("img",{staticClass:"profile-img-card",attrs:{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png"}}),t._v(" "),s("form",{attrs:{name:"form"},on:{submit:function(e){return e.preventDefault(),t.handleLogin(e)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[t._v("Username")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"username"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),t._v(" "),t.errors.has("username")?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("Username is required!")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"password",name:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._v(" "),t.errors.has("password")?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("Password is required!")]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:t.loading}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"spinner-border spinner-border-sm"}),t._v(" "),s("span",[t._v("Login")])])]),t._v(" "),s("div",{staticClass:"form-group"},[t.message?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(t._s(t.message))]):t._e()])])])])},staticRenderFns:[]};var p=s("VU/8")(d,v,!1,function(t){s("HAkb")},"data-v-c4cb54aa",null).exports,f={name:"Register",data:function(){return{user:new m("","",""),submitted:!1,successful:!1,message:""}},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}},mounted:function(){this.loggedIn&&this.$router.push("/profile")},methods:{handleRegister:function(){var t=this;this.message="",this.submitted=!0,this.$validator.validate().then(function(e){e&&t.$store.dispatch("auth/register",t.user).then(function(e){t.message=e.message,t.successful=!0},function(e){t.message=e.response&&e.response.data||e.message||e.toString(),t.successful=!1})})}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card card-container"},[s("img",{staticClass:"profile-img-card",attrs:{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png"}}),t._v(" "),s("form",{attrs:{name:"form"},on:{submit:function(e){return e.preventDefault(),t.handleRegister(e)}}},[t.successful?t._e():s("div",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[t._v("Username")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"},{name:"validate",rawName:"v-validate",value:"required|min:3|max:20",expression:"'required|min:3|max:20'"}],staticClass:"form-control",attrs:{type:"text",name:"username"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),t._v(" "),t.submitted&&t.errors.has("username")?s("div",{staticClass:"alert-danger"},[t._v(t._s(t.errors.first("username")))]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"},{name:"validate",rawName:"v-validate",value:"required|email|max:50",expression:"'required|email|max:50'"}],staticClass:"form-control",attrs:{type:"email",name:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),t._v(" "),t.submitted&&t.errors.has("email")?s("div",{staticClass:"alert-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"},{name:"validate",rawName:"v-validate",value:"required|min:6|max:40",expression:"'required|min:6|max:40'"}],staticClass:"form-control",attrs:{type:"password",name:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._v(" "),t.submitted&&t.errors.has("password")?s("div",{staticClass:"alert-danger"},[t._v(t._s(t.errors.first("password")))]):t._e()]),t._v(" "),t._m(0)])]),t._v(" "),t.message?s("div",{staticClass:"alert",class:t.successful?"alert-success":"alert-danger"},[t._v(t._s(t.message))]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("button",{staticClass:"btn btn-primary btn-block"},[this._v("Sign Up")])])}]};var h=s("VU/8")(f,g,!1,function(t){s("7Kme")},"data-v-88555ba8",null).exports;s("bKv9");a.a.use(i.a);var _=new i.a({mode:"history",routes:[{path:"/",name:"home",component:u},{path:"/home",component:u},{path:"/login",component:p},{path:"/register",component:h},{path:"/profile",name:"profile",component:function(){return s.e(1).then(s.bind(null,"Twgf"))}},{path:"/admin",name:"admin",component:function(){return s.e(0).then(s.bind(null,"Atqm"))}},{path:"/user",name:"user",component:function(){return new Promise(function(t){t()}).then(s.bind(null,"bKv9"))}}]}),w=s("NYxO"),C=s("//Fk"),b=s.n(C),q=s("mvHQ"),k=s.n(q),x=s("wxAW"),E=s.n(x),L=s("mtWM"),U=s.n(L),$="http://localhost:8088/api/auth/",N=new(function(){function t(){c()(this,t)}return E()(t,[{key:"login",value:function(t){return U.a.post($+"signin",{username:t.username,password:t.password}).then(function(t){return t.data.accessToken&&localStorage.setItem("user",k()(t.data)),t.data})}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(t){return U.a.post($+"signup",{username:t.username,email:t.email,password:t.password})}}]),t}()),y=JSON.parse(localStorage.getItem("user")),I={namespaced:!0,state:y?{status:{loggedIn:!0},user:y}:{status:{loggedIn:!1},user:null},actions:{login:function(t,e){var s=t.commit;return N.login(e).then(function(t){return s("loginSuccess",t),b.a.resolve(t)},function(t){return s("loginFailure"),b.a.reject(t)})},logout:function(t){var e=t.commit;N.logout(),e("logout")},register:function(t,e){var s=t.commit;return N.register(e).then(function(t){return s("registerSuccess"),b.a.resolve(t.data)},function(t){return s("registerFailure"),b.a.reject(t)})}},mutations:{loginSuccess:function(t,e){t.status.loggedIn=!0,t.user=e},loginFailure:function(t){t.status.loggedIn=!1,t.user=null},logout:function(t){t.status.loggedIn=!1,t.user=null},registerSuccess:function(t){t.status.loggedIn=!1},registerFailure:function(t){t.status.loggedIn=!1}}},S=s("Xxa5"),B=s.n(S),A=s("exGp"),O=s.n(A),P={state:{equipList:[]},getters:{getEquipList:function(t){return t.equipList}},actions:{fetchEquipByName:function(t,e){var s=this;return O()(B.a.mark(function a(){return B.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t.commit("clearEquipList"),U.a.get("http://localhost:8088/api/equip/searchByName/"+e).then(function(e){t.commit("updateEquipList",e.data)});case 2:case"end":return s.stop()}},a,s)}))()},fetchEquipBySerialNumber:function(t,e){var s=this;return O()(B.a.mark(function a(){return B.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t.commit("clearEquipList"),U.a.get("http://localhost:8088/api/equip/searchBySerialNumber/"+e).then(function(e){t.commit("updateEquipList",e.data)});case 2:case"end":return s.stop()}},a,s)}))()},clearEquipList:function(t){t.commit("updateEquipList",[])}},mutations:{updateEquipList:function(t,e){t.equipList=e}}},R={state:{locations:[]},getters:{getLocations:function(t){return t.locations}},actions:{fetchLocations:function(t){U.a.get("http://localhost:8088/api/equip/loadLocations").then(function(e){t.commit("updateLocations",e.data)})}},mutations:{updateLocations:function(t,e){t.locations=e}}};a.a.use(w.a);var F=new w.a.Store({modules:{auth:I,equip:{state:{equip:{name:"",serialNumber:"",location:{name:""}}},getters:{getCurrentEquip:function(t){return t.equip}},actions:{setEquip:function(t,e){t.commit("setEquip",e)}},mutations:{setEquip:function(t,e){t.equip=e}}},equipList:P,locations:R}}),M=(s("K3J8"),s("qb6w"),s("sUu7")),j=s("C/JF"),H=s("1e6/"),D=s("fhbW");j.c.add(D.a,D.d,D.e,D.b,D.c),a.a.config.productionTip=!1,a.a.use(M.a),a.a.component("font-awesome-icon",H.a),a.a.use(w.a),new a.a({router:_,store:F,render:function(t){return t(n)}}).$mount("#app")},bKv9:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("qjiu");var a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("header",{staticClass:"jumbotron"},[e("h3",[this._v(this._s(this.content))])])])},staticRenderFns:[]},r=s("VU/8")({name:"User",data:function(){return{content:""}},mounted:function(){}},a,!1,null,null,null);e.default=r.exports},qb6w:function(t,e){},qjiu:function(t,e,s){"use strict";var a=s("Zrlr"),r=s.n(a),n=s("wxAW"),i=s.n(n),o=s("mtWM"),u=s.n(o);function l(){var t=JSON.parse(localStorage.getItem("user"));return t&&t.accessToken?{Authorization:"Bearer "+t.accessToken}:{}}var c="http://localhost:8088/api/test/";new(function(){function t(){r()(this,t)}return i()(t,[{key:"getPublicContent",value:function(){return u.a.get(c+"all")}},{key:"getUserBoard",value:function(){return u.a.get(c+"user",{headers:l()})}},{key:"getModeratorBoard",value:function(){return u.a.get(c+"mod",{headers:l()})}},{key:"getAdminBoard",value:function(){return u.a.get(c+"admin",{headers:l()})}}]),t}())}},["NHnr"]);
//# sourceMappingURL=app.a9f9bcb001457bcdf08e.js.map